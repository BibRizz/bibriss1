<script src='scripts/jszip.js'></script>
<script src='scripts/filesaver.js'></script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<style>
  body{
    background-color:black;
  }
</style>
</textarea>
<script>
  var codelist=[];
  var namelist=[];
  function getHtml(filelist,codelist,namelist){
    for (var i=0;i<filelist.length;i++){
      fetch("/files"+filelist[i])
        .then((response) => {
          return response.text();
        })
        .then((html) => {
          codelist.push(html);
          namelist.push(filelist[i]);
        });
    }
  }
  var filelist=["/app.json","/idk","/index.js","/index.mjs","/LICENSE","/main.sh","/main.zip","/node_modules/bare-server-node/AbstractMessage.js","/node_modules/bare-server-node/app.js","/node_modules/bare-server-node/app.mjs","/node_modules/bare-server-node/cli/server.js","/node_modules/bare-server-node/cli/y","/node_modules/bare-server-node/encodeProtocol.js","/node_modules/bare-server-node/headerUtil.js","/node_modules/bare-server-node/LICENSE","/node_modules/bare-server-node/package.json","/node_modules/bare-server-node/README.md","/node_modules/bare-server-node/Server.js","/node_modules/bare-server-node/Server.mjs","/node_modules/bare-server-node/splitHeaderUtil.js","/node_modules/bare-server-node/V1.js","/node_modules/bare-server-node/V2.js","/node_modules/fetch-headers/headers.d.ts","/node_modules/fetch-headers/headers.js","/node_modules/fetch-headers/LICENSE","/node_modules/fetch-headers/package.json","/node_modules/fetch-headers/README.md","/node_modules/fetch-headers/test/header-setcookie.any.js","/node_modules/fetch-headers/test/http-loader.js","/node_modules/fetch-headers/test/own-misc-test.any.js","/node_modules/fetch-headers/test/wpt_test.js","/node_modules/fetch-headers/test/y","/node_modules/fetch-headers/tsconfig.json","/node_modules/mime/CHANGELOG.md","/node_modules/mime/cli.js","/node_modules/mime/LICENSE","/node_modules/mime/mime.js","/node_modules/mime/package.json","/node_modules/mime/README.md","/node_modules/mime/src/build.js","/node_modules/mime/src/test.js","/node_modules/mime/src/y","/node_modules/mime/types.json","/node_modules/node-static/benchmark/node-static-0.3.0.txt","/node_modules/node-static/bin/cli.js","/node_modules/node-static/examples/file-server.js","/node_modules/node-static/lib/node-static.js","/node_modules/node-static/lib/node-static/util.js","/node_modules/node-static/LICENSE","/node_modules/node-static/package.json","/node_modules/node-static/README.md","/node_modules/node-static/test/fixtures/empty.css","/node_modules/node-static/test/fixtures/hello.txt","/node_modules/node-static/test/fixtures/index.html","/node_modules/node-static/test/fixtures/there","/node_modules/node-static/test/fixtures/there/index.html","/node_modules/node-static/test/integration/node-static-test.js","/node_modules/node-static/test/integration/y","/package.json","/package-lock.json","/Procfile","/README.md","/replit.nix","/ssl/default.cert","/ssl/default.key","/ssl/y","/static/style.css","/static/styles.css","/static/sw.js","/static/uv/uv.bundle.js","/static/uv/uv.config.js","/static/uv/uv.handler.js","/static/uv/uv.sw.js"];
  getHtml(filelist,codelist,namelist);
  
  function waitforcode(){
    if (filelist.length==codelist.length){
      clearInterval(waitingforcode);
      var zip = new JSZip();
      var loadingbar=document.createElement('div');
      loadingbar.style.position="absolute";
      loadingbar.style.left="0%";
      loadingbar.style.top="50%";
      loadingbar.style.width="0%";
      loadingbar.style.backgroundColor="white";
      loadingbar.style.height="25px";
      document.body.appendChild(loadingbar);
      var loadamount=0;
      for (var i = 0; i < filelist.length; i++) {
        loadamount=loadamount+100/filelist.length;
        loadingbar.style.width=loadamount+"%";
        var txt = codelist[i];
        zip.file(filelist[i], txt);
        console.log("done with "+filelist[i]);
      }
      zip.generateAsync({
        type:"base64"
      }).then(function(content) {
        var l=document.createElement('a');
        l.setAttribute('download', '');
        l.href=content;
        l.click();
      });       
    }
    console.log("loading...");
  }
  var waitingforcode=setInterval(waitforcode,5);
</script>
