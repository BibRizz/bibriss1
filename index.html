<input id="input" type="file">
<button id="button">download</button>
<textarea id="text">
testing
</textarea>
<script>
  var tst = new DataTransfer(); 
  tst.items.add(new File(['test'], 'test.txt'));
  input.files = tst.files;
  
  var inp = document.getElementById('input');
  inp.onchange = () => {
    for (var i = 0; i < inp.files.length; ++i) {
      var name = inp.files.item(i).name;
      var value = inp.files.item(i).value;
      alert("file name: " + name);
      alert("file value: " + value);
    }
  }

  function download(f, t) {
    var e = document.createElement('a');
    e.setAttribute('href','data:text/plain;charset=utf-8, '
    + encodeURIComponent(t));
    e.setAttribute('download', f);
    document.body.appendChild(e);
    e.click();
    document.body.removeChild(e);
  }
  document.getElementById("button").addEventListener("click", function() {
    var t = document.getElementById("text").value;
    var f = "test.txt";
    download(f, t);
  }, false);
</script>
